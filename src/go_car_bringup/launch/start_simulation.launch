<?xml version='1.0' encoding='UTF-8'?>
<launch>
    <arg name="world_name" default="city"/>
    <arg name="details" default="quality"/>
    <!-- car_model options: lincolm, seat -->
    <arg name="car_model" default="lincolm"/>
    <!-- manual_control_type options: keyboard, gamepad, autonomous -->
    <arg name="control_type" default="keyboard"/>
    <arg name="rviz_visualization" default="false"/>

    <include file="$(find go_car_gazebo)/launch/load_gazebo_simulation.launch">
        <arg name="world" value="$(arg world_name)"/>
        <arg name="details" value="$(arg details)"/>
        <arg name="car_model" value="$(arg car_model)"/>
    </include>

    <group if="$(arg rviz_visualization)">
        <node type="rviz" name="rviz" pkg="rviz" args="-d $(find go_car_bringup)/config/sensors_visualization_3d.rviz" />
    </group>

    <group unless="$(eval control_type == 'autonomous')">
        <include file="$(find go_car_manual_control)/launch/manual_control.launch">
            <arg name="type" value="$(arg manual_control_type)"/>
        </include>
    </group>

    <node name="wait_for_gazebo" pkg="go_car_bringup" type="delay_execution.sh" args="20 go_car_bringup postload.launch" output="screen"/>

</launch>
